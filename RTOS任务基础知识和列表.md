

![](https://cdn.nlark.com/yuque/0/2024/png/40891866/1726219357825-9d651799-a5b8-4890-828f-4c3430e8356f.png)

运行态：目前 CPU 正在执行的任务

就绪态：准备好运行的任务(目前有任务在运行)

阻塞态：等待一个时间段或者外部事件而暂时不运行

挂起态：无限期的停止运行，直到调用恢复 API



FreeRTOS 任务优先级

![](https://cdn.nlark.com/yuque/0/2024/png/40891866/1726219364645-aa55f2f1-ed46-4af4-a456-0f6a9318d6fb.png)

![](https://cdn.nlark.com/yuque/0/2024/png/40891866/1726232234467-18ab4e6e-8e78-487f-a714-f9ccf3aefc7f.png)

![](https://cdn.nlark.com/yuque/0/2024/png/40891866/1726232213583-9fd98703-a947-41c8-ada2-560d93c4b2a8.png)

任务优先级并非越多越好，任务优先级越多所消耗的资源也就越多，上图所需要初始化管理的列表就越多



FreeRTOS 任务优先级数值越大优先级越高，跟中断优先级刚好相反

![](https://cdn.nlark.com/yuque/0/2024/png/40891866/1726219370803-16c5c57a-3f0d-4cdc-87c3-1989b3955d93.png)



FreeRTOS 与挂起态有关的函数

(删除、创建那些函数 API 已经比较熟悉了，挂起的用的少所以拿出来说一说而且它还有一个中断专用 API)

(下图中的文字是说任务删除了任务中定义的变量等都会在空闲任务中删除，但是自己在任务中申请的内存是不会删除的，就跟裸机编程类似只是稍微注意点吧)

![](https://cdn.nlark.com/yuque/0/2024/png/40891866/1726219377404-9f9fc3ba-ca29-4fb5-bcec-af7b90fa30fa.png)

![](https://cdn.nlark.com/yuque/0/2024/png/40891866/1726219383186-65a8228a-610c-4e8e-8147-b5015a9059d1.png)



列表相关

知道列表和列表项就可以主要用于分析任务切换 

pxIndex 指向列表中任一列表项，主要用于遍历，因为是双向链表所以指向哪一个都可以，但一开始初始化时是指向 listend 的，毕竟那时候只有一个列表项

xlistend 一般位于列表末尾，初始化时就会给它赋一个很大的值(主要用于升序排列)

![](https://cdn.nlark.com/yuque/0/2024/png/40891866/1726226916328-240499de-9368-4341-9134-96c20f7519a0.png)

列表项的初始化很简单，只是把 container 设为 NULL，不属于任何一个列表就行，pvowner 一般是指向任务控制块

![](https://cdn.nlark.com/yuque/0/2024/png/40891866/1726226922336-4b7de4a9-6994-4731-a818-d2a98c1edc07.png)





